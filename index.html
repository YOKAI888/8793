<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸŒ¸é¼»ããã‚ã£ã—ã‚‡ã„ï¼šå®çŸ³ã®é›¢æ•£ã¨é›†åˆğŸŒ¸</title>
<style>
  html,body{margin:0;padding:0;overflow:hidden;height:100%;background:linear-gradient(270deg,#1a1a2e,#162447,#1f4068,#1b1b2f,#0f0f1f);background-size:1200% 1200%;animation:g 40s ease infinite}
  @keyframes g{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}

  .snow{position:absolute;pointer-events:none;font-size:22px;animation:snowfall linear forwards;opacity:0.85;}
  @keyframes snowfall{
    0%{transform:translateY(-100px) translateX(0) rotate(0deg);opacity:0}
    10%{opacity:0.85}
    100%{transform:translateY(calc(100vh + 100px)) translateX(var(--swing)) rotate(360deg);opacity:0}
  }
  .ground-snow{position:absolute;bottom:0;width:10px;height:10px;background:rgba(255,255,255,0.9);border-radius:50%;box-shadow:0 0 10px #fff;pointer-events:none;}
  
  /* ğŸ’© ã‚¹ã‚¿ã‚¤ãƒ«ï¼š will-changeã§çˆ†é€ŸåŒ– */
  .poop {
    position:absolute; font-size:18px; cursor:pointer; user-select:none; 
    will-change: left, top; transition: opacity 0.6s ease;
  }
  
  .face{position:absolute;font-size:45px;color:#fff;text-shadow:0 0 12px #000;pointer-events:none;z-index:100;}
</style>
</head>
<body>

<script>
const poops = [];
// ãã„ã¡ã‚ƒã‚“ã®æ°—åˆ†ã‚’ä¸Šã’ã‚‹å®çŸ³ã®ã‚ˆã†ãªãƒ‘ãƒ¬ãƒƒãƒˆ
const colors = ["#ffccff", "#e0ffff", "#f0e8ff", "#e8fff0", "#fff8e8", "#ffd1dc", "#b3e5fc", "#d1c4e9"];
let mouseX = 0, mouseY = 0;
let isMouseActive = false;
let groundSnowCount = 0;

// ğŸ’©ç”Ÿæˆï¼šã‚«ãƒ©ãƒ•ãƒ«ä»•æ§˜
for(let i=0; i<300; i++){
  const p = document.createElement('div');
  p.className='poop';
  p.innerText='ğŸ’©';
  
  // ãƒ©ãƒ³ãƒ€ãƒ ãªè‰²ã¨ã€ãã‚Œã«åˆã‚ã›ãŸå…‰ã‚’ä»˜ä¸
  const color = colors[Math.floor(Math.random() * colors.length)];
  p.style.color = color;
  p.style.textShadow = `0 0 8px ${color}`;
  
  p.x = Math.random() * window.innerWidth;
  p.y = Math.random() * window.innerHeight;
  // é›¢æ•£ã™ã‚‹ã¨ãã®å€‹æ€§ã‚’å‡ºã™ãŸã‚ã«é€Ÿåº¦ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã«
  p.vx = Math.random() * 1.2 - 0.6;
  p.vy = Math.random() * 1.2 - 0.6;
  
  document.body.appendChild(p);
  poops.push(p);
}

document.addEventListener('mousemove', e => {
  mouseX = e.clientX; mouseY = e.clientY;
  isMouseActive = true;
  clearTimeout(window.mouseTimer);
  window.mouseTimer = setTimeout(()=> isMouseActive = false, 1200); // 1.2ç§’å¾Œã«é›¢æ•£é–‹å§‹
});

// é›ªé™ã‚‰ã›ï¼ˆæƒé™¤æ©Ÿèƒ½ã¤ãï¼‰
function snow(){
  for(let i=0; i<6; i++){
    const s = document.createElement('div');
    s.className='snow';
    s.innerText = ['â„','â…','â†','âœ´','âœ¿'][Math.floor(Math.random()*5)];
    s.style.color = colors[Math.floor(Math.random()*colors.length)];
    const startX = Math.random() * window.innerWidth;
    s.style.left = startX + 'px';
    const dur = Math.random() * 8 + 10;
    s.style.animationDuration = dur +'s';
    const swing = Math.random() * 200 - 100;
    s.style.setProperty('--swing', swing + 'px');
    document.body.appendChild(s);

    setTimeout(() => {
      s.remove();
      if(Math.random() < 0.3 && groundSnowCount < 150){
        const g = document.createElement('div');
        g.className='ground-snow';
        g.style.left = (startX + swing) + 'px';
        document.body.appendChild(g);
        groundSnowCount++;
        setTimeout(() => { g.remove(); groundSnowCount--; }, 10000);
      }
    }, dur * 1000);
  }
}
setInterval(snow, 600);

// ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼šé›†åˆã¨é›¢æ•£ã®ç¾å­¦
function animate(){
  poops.forEach(p => {
    if(isMouseActive){
      // ãƒã‚¦ã‚¹ã¸å¸ã„å¯„ã›ï¼ˆé›†åˆï¼‰
      p.x += (mouseX - p.x) * 0.03;
      p.y += (mouseY - p.y) * 0.03;
    } else {
      // è‡ªç”±æ„å¿—ã«ã‚ˆã‚‹æ¼‚ã„ï¼ˆé›¢æ•£ï¼‰
      p.x += p.vx;
      p.y += p.vy;
      // ç”»é¢ç«¯ã§è·³ã­è¿”ã‚‹
      if(p.x < 0 || p.x > window.innerWidth) p.vx *= -1;
      if(p.y < 0 || p.y > window.innerHeight) p.vy *= -1;
    }
    p.style.left = p.x + 'px';
    p.style.top = p.y + 'px';
  });
  requestAnimationFrame(animate);
}
animate();

// ã‚¯ãƒªãƒƒã‚¯åå¿œï¼šæ¡œå¹é›ª
document.addEventListener('click', e => {
  let hit = false;
  poops.forEach(p => {
    const dx = e.clientX - p.x;
    const dy = e.clientY - p.y;
    if(dx*dx + dy*dy < 3000) hit = true;
  });

  if(hit){
    if(Math.random() < 0.2){
      for(let i=0; i<50; i++){
        const sakura = document.createElement('div');
        sakura.className='snow';
        sakura.innerText='ğŸŒ¸';
        sakura.style.left = e.clientX + (Math.random()*200-100) +'px';
        sakura.style.top = e.clientY + (Math.random()*100-50) +'px';
        sakura.style.animationDuration = (Math.random()*3 + 2) +'s';
        document.body.appendChild(sakura);
        setTimeout(() => sakura.remove(), 4000);
      }
    } else {
      const f = document.createElement('div');
      f.className='face';
      f.innerText = Math.random() < 0.1 ? 'ãƒã‚«ãŒæŠ¼ã™ã…ã€œ( Â´_ã‚ï½€)' : '( Â´,_ã‚ï½€)ï¾Œï¾Ÿï½¯';
      f.style.left = e.clientX + 'px';
      f.style.top = e.clientY + 'px';
      document.body.appendChild(f);
      setTimeout(() => f.remove(), 800);
    }
  }
});
</script>
</body>
</html>